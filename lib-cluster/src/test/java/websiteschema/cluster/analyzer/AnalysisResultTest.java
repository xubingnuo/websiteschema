/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package websiteschema.cluster.analyzer;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import org.junit.Test;
import websiteschema.utils.PojoMapper;

/**
 *
 * @author ray
 */
public class AnalysisResultTest {

    private Map<String, String> create() {
        Map<String, String> ret = new HashMap<String, String>();
        ret.put("ValidNodes", "[\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/div[@id='endText']/p\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_photo' and @id='modePhoto']/div[@class='nph_photo_view']/div[@id='photoLayout']/div[@class='nph_photo_layout' and @id='photomiddle']/div[@class='nph_layout_cnt']/div[@class='nph_layout_bd']/ul[@class='nph_list_relat clearfix']/li/h5/a\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_cnt clearfix']/div[@class='nph_set_info']/div[@id='setInfo']/p\",\"html/body/div[@class='nav_channel']/span[@class='nav']/a[@class='nobg']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='titleBar']/h2/strong[@class='cBlue']/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colR']/div[@class='content']/ul[@class='f12bla']/li/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colR']/div[@class='content']/p/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='focusPic']/div[@class='main clearfix tab' and @id='focus_tab']/div[@class='normal']/h2/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='content']/ul[@class='f12bla']/li/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='content']/div/ul[@class='f12bla']/li/a/em[@class='I_V_']\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content']/ul[@class='cList1']/li/span[@class='s1']/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content focusText']/h2/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content focusText']/ul[@class='cList1']/li/span[@class='s2 f12px cDGray']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@id='endText']/p/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content']/ul[@class='cList1']/li/span[@class='s2 f12px cDGray']/span[@class='cDRed']\",\"html/body/div[@class='area clearfix']/div[@class='imgList4']/ul/li/p/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='titleBar ui_s1']/h2/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content focusText']/p[@class='cBlue']/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='content']/ul[@class='f12bla']/li[@class='nobg fB']/a\",\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/h1[@id='h1title']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='content tab' and @id='endpage_tab']/ul[@class='f14blu normal on']/li/a\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@id='endText']/p\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_cnt clearfix']/div[@class='nph_set_info']/div[@id='setInfo']/div[@class='nph_set_title']/span[@class='nph_set_size' and @id='streamType']/span[@class='nph_c_lh']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='vdoAbout']/div[@class='tag']/a\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='content tab' and @id='endpage_tab']/ul[@class='f14blu normal']/li/a\",\"html/body/div[@class='nav_channel']/span[@class='nav']/a[@class='current']\",\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/span[@class='info']/a[@class='cDRed' and @id='endpageUrl1']\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content focusText']/ul[@class='cList1']/li/span[@class='s1']/a\",\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/div[@class='titleBar1 ui_s1']/h2/strong[@class='cBlue']/a\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='vdoAbout']/p[@class='about']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/p[@class='summary']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/h1[@id='h1title']\",\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/div[@class='content tab' and @id='endpage_tab']/ul[@class='f14blu normal on']/li/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content']/ul[@class='f14bla']/li/a\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_cnt clearfix']/div[@class='nph_set_info']/div[@id='setInfo']/div[@class='nph_set_title']/h1\",\"html/body/div[@class='nph_area']/div[@id='galleryRelat']/div[@class='nph_box_relat clearfix']/ul[@class='nph_list_relat clearfix']/li/h5/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='content']/ul[@class='f12bla']/li[@class='firstNd clearfix']/h3[@class='f14px']/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='titleBar ui_sm']/h2/a\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@id='endText']/p/strong\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_cnt clearfix']/div[@class='nph_set_info']/div[@id='setInfo']/div[@class='nph_set_title']/span\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='titleBar ui_sm']/h2\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='focusPic']/div[@class='main clearfix tab' and @id='focus_tab']/div[@class='normal on']/h2/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colR']/div[@class='titleBar ui_sr']/h2/a\"]");
        ret.put("InvalidNodes", "[\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/div[@id='endText']/p\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_photo' and @id='modePhoto']/div[@class='nph_photo_view']/div[@id='photoLayout']/div[@class='nph_photo_layout' and @id='photomiddle']/div[@class='nph_layout_cnt']/div[@class='nph_layout_bd']/ul[@class='nph_list_relat clearfix']/li/h5/a\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_cnt clearfix']/div[@class='nph_set_info']/div[@id='setInfo']/p\",\"html/body/div[@class='nav_channel']/span[@class='nav']/a[@class='nobg']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='titleBar']/h2/strong[@class='cBlue']/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colR']/div[@class='content']/ul[@class='f12bla']/li/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colR']/div[@class='content']/p/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='focusPic']/div[@class='main clearfix tab' and @id='focus_tab']/div[@class='normal']/h2/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='content']/ul[@class='f12bla']/li/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='content']/div/ul[@class='f12bla']/li/a/em[@class='I_V_']\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content']/ul[@class='cList1']/li/span[@class='s1']/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content focusText']/h2/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content focusText']/ul[@class='cList1']/li/span[@class='s2 f12px cDGray']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@id='endText']/p/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content']/ul[@class='cList1']/li/span[@class='s2 f12px cDGray']/span[@class='cDRed']\",\"html/body/div[@class='area clearfix']/div[@class='imgList4']/ul/li/p/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='titleBar ui_s1']/h2/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content focusText']/p[@class='cBlue']/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='content']/ul[@class='f12bla']/li[@class='nobg fB']/a\",\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/h1[@id='h1title']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='content tab' and @id='endpage_tab']/ul[@class='f14blu normal on']/li/a\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@id='endText']/p\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_cnt clearfix']/div[@class='nph_set_info']/div[@id='setInfo']/div[@class='nph_set_title']/span[@class='nph_set_size' and @id='streamType']/span[@class='nph_c_lh']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='vdoAbout']/div[@class='tag']/a\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='content tab' and @id='endpage_tab']/ul[@class='f14blu normal']/li/a\",\"html/body/div[@class='nav_channel']/span[@class='nav']/a[@class='current']\",\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/span[@class='info']/a[@class='cDRed' and @id='endpageUrl1']\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content focusText']/ul[@class='cList1']/li/span[@class='s1']/a\",\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/div[@class='titleBar1 ui_s1']/h2/strong[@class='cBlue']/a\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@class='vdoAbout']/p[@class='about']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/p[@class='summary']\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/h1[@id='h1title']\",\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/div[@class='content tab' and @id='endpage_tab']/ul[@class='f14blu normal on']/li/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colM']/div[@class='content']/ul[@class='f14bla']/li/a\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_cnt clearfix']/div[@class='nph_set_info']/div[@id='setInfo']/div[@class='nph_set_title']/h1\",\"html/body/div[@class='nph_area']/div[@id='galleryRelat']/div[@class='nph_box_relat clearfix']/ul[@class='nph_list_relat clearfix']/li/h5/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='content']/ul[@class='f12bla']/li[@class='firstNd clearfix']/h3[@class='f14px']/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='titleBar ui_sm']/h2/a\",\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/div[@id='endText']/p/strong\",\"html/body/div[@class='nph_area']/div[@class='nph_gallery clearfix' and @id='gallery']/div[@class='nph_bg']/div[@class='nph_cnt clearfix']/div[@class='nph_set_info']/div[@id='setInfo']/div[@class='nph_set_title']/span\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='titleBar ui_sm']/h2\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colL']/div[@class='focusPic']/div[@class='main clearfix tab' and @id='focus_tab']/div[@class='normal on']/h2/a\",\"html/body/div[@class='area areabg1 clearfix']/div[@class='colR']/div[@class='titleBar ui_sr']/h2/a\"]");
        ret.put("TitlePrefix", "[]");
        ret.put("TitleSuffix", "[\"_网易新闻\",\" - 网易新闻视频_网易视频\",\"_网易新闻中心\"]");
        ret.put("FieldAnalyzers", "{\"DATE\":\"websiteschema.cluster.analyzer.fields.DateAnalyzer\",\"TITLE\":\"websiteschema.cluster.analyzer.fields.TitleAnalyzer\"}");
        ret.put("DATE", "[{\"Format\":\"yyyy-MM-dd HH:mm:SS\",\"Pattern\":\"yyyy-MM-dd HH:mm:SS\",\"XPath\":\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/span[@class='info']\",\"Cluster\":\"[\\\"0\\\",\\\"2\\\",\\\"3\\\"]\"},{\"Format\":\"yyyy-MM-dd HH:mm:SS\",\"Pattern\":\"yyyy-MM-dd HH:mm:SS\",\"XPath\":\"html/body/div[@class='wrap']/div[@class='bbsarea']/div[@class='articleMain']/div[@class='articleReview' and @id='res_240248681']/div[@class='archiveBody']/div[@class='articleTools']/span[@class='right']\",\"Cluster\":\"[\\\"4\\\"]\"},{\"Format\":\"yyyy-MM-dd HH:mm:SS\",\"Pattern\":\"yyyy-MM-dd HH:mm:SS\",\"XPath\":\"html/body/div[@class='wrap']/div[@class='bbsarea']/div[@class='articleMain']/div[@class='articleReview' and @id='res_240324148']/div[@class='archiveBody']/div[@class='articleTools']/span[@class='right']\",\"Cluster\":\"[\\\"5\\\"]\"},{\"Format\":\"yyyy-MM-dd HH:mm:SS\",\"Pattern\":\"yyyy-MM-dd HH:mm:SS\",\"XPath\":\"html/body/div[@class='wrap']/div[@class='bbsarea']/div[@class='articleMain']/div[@class='articleReview' and @id='res_240318819']/div[@class='archiveBody']/div[@class='articleTools']/span[@class='right']\",\"Cluster\":\"[\\\"6\\\"]\"},{\"Format\":\"yyyy-MM-dd HH:mm:SS\",\"Pattern\":\"yyyy-MM-dd HH:mm:SS\",\"XPath\":\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/span[@class='info']\",\"Cluster\":\"[\\\"8\\\"]\"},{\"XPath\":\"html/body/div[@class='psn-hd']/div[@class='psn-hd-message' and @id='psn-message']/span[@class='psn-hd-menu']/span[@id='psn-hd-menu']/a[@class='cDRed']\",\"Cluster\":\"[\\\"14\\\",\\\"17\\\"]\"},{\"Format\":\"yyyy-MM-dd HH:mm:SS\",\"Pattern\":\"yyyy-MM-dd\",\"XPath\":\"html/body/div[@class='area clearfix']/table[@class='editor-sign cDGray ke-zeroborder']/tbody/tr/td\",\"Cluster\":\"[\\\"19\\\"]\"}]");
        ret.put("TITLE", "[{\"XPath\":\"html/body/div[@class='endArea']/div[@class='colL']/div[@class='bg_endPage_blue clearfix']/div[@class='endContent']/h1[@id='h1title']\",\"Cluster\":\"[\\\"0\\\",\\\"2\\\",\\\"3\\\",\\\"4\\\",\\\"5\\\",\\\"6\\\"]\"},{\"XPath\":\"html/body/div[@class='endArea bg_endPage clearfix']/div[@class='col1']/div[@class='endContent bg_endPage_Lblue']/h1[@id='h1title']\",\"Cluster\":\"[\\\"8\\\",\\\"11\\\",\\\"14\\\",\\\"17\\\",\\\"19\\\"]\"}]");
        return ret;
    }

    @Test
    public void test() throws IOException {
        Map<String, String> map = create();
        AnalysisResult result = new AnalysisResult(map);
        List<Map<String, String>> dateConfig = result.getFieldAnalysisResult("DATE");
        for (Map<String, String> conf : dateConfig) {
            System.out.println("XPath: " + conf.get("XPath"));
            String properClusters = conf.get("Cluster");
            List<String> clusters = PojoMapper.fromJson(properClusters, List.class);
            System.out.println("Proper clusters: " + clusters);
        }
    }
}
